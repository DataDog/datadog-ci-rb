module Datadog
  module CI
    module TestDiscovery
      class Component
        @enabled: bool
        @output_path: String?
        @buffer: Array[Hash[String, String?]]
        @buffer_mutex: Mutex

        def initialize: (enabled: bool, output_path: String?) -> void

        def configure: (untyped library_settings, untyped test_session) -> void

        def disable_features_for_test_discovery!: (untyped settings) -> void

        def start: () -> void

        def finish: () -> void

        def record_test: (name: String?, suite: String?, module_name: String?, parameters: String?, source_file: String?) -> void

        def shutdown!: () -> void

        def enabled?: () -> bool

        private

        def flush_buffer_unsafe: () -> void
      end
    end
  end
end
